import{s as r,v as i}from"./app-7HI8a4lx.js";import{D as m}from"./DatabaseType-ZbmIKB2x.js";import{w as n}from"./wrapper-BRgqG3aR.js";import{e as a}from"./defaultConfig-B2CzoKYj.js";const o=r("result",{state:()=>({data:[],backupData:[],fields:[],dbType:null,costTime:0,sql:"",transId:null,primaryKey:null,hasTruncate:!1,readonly:!1,reverseData:!1,columnList:null,columnTypeMap:null,primaryKeyList:null,database:null,table:null,withDot:null,tableCount:null,pageNum:null,pageSize:null}),getters:{noTable(){return this.tableCount!=1}}});function w(e,t){return e?o().withDot?n(e,t):e.split(".").map(u=>n(u,t)).join("."):null}const l=o(),c=r("UI",{state:()=>({showSQLPanel:!1,state:{...a},user:null,userInit:!1,viewColumn:2,viewType:"Default",info:{sql:null,message:null,error:!1},tableStatus:{remainHeight:0,doNotClear:!1,loadingTimeout:null,rawColumnWidth:500},table:{search:"",loading:!1,start:new Date().getTime(),loadingTimer:null,widthItem:{},sort:{ascIndex:null,descIndex:null},sortKeys:[],expandKeys:[],selectedRows:[],selectedRowKeys:[]},page:{pageNum:1,pageSize:-1,total:0},dialog:{importVisible:!1,exportVisible:!1,detailScope:null,detailVisible:!1},toolbar:{sql:null,showSaveBtn:!1,saveLoading:!1,filter:{},showColumns:[]}}),getters:{notAllowUpdate(){return l.tableCount!=1||l.readonly},notAllowUpdateLevel2(){return this.notAllowUpdate||this.reverseData},isSplitView(){return this.viewColumn>=2},reverseData(){return this.viewType=="Reverse"},isPay(e){var t;return!this.userInit||((t=this.user)==null?void 0:t.expireTime)>new Date().getTime()}},actions:{checkShowSQLPanel(){var e,t,s;if(this.isSplitView&&([m.ES].includes(l.dbType)||window.innerHeight<500||((s=(t=(e=this.toolbar)==null?void 0:e.sql)==null?void 0:t.match(/\n/g))==null?void 0:s.length)>1))return this.showSQLPanel=!1;this.showSQLPanel=!0},resetConfig(){this.viewType="Default";for(const e of Object.keys(a))this.state[e]=a[e],i.emit("upState",{key:e,value:a[e],ignore:!0})},execute(e){e&&(i.emit("executeSQL",{sql:e}),this.table.start=new Date().getTime(),this.queueLoading())},queueLoading(){this.tableStatus.doNotClear||(this.info.message=null),clearTimeout(this.tableStatus.loadingTimeout),this.tableStatus.loadingTimeout=setTimeout(()=>{this.table.loading=!0,l.costTime=0,clearInterval(this.table.loadingTimer),this.table.loadingTimer=setInterval(()=>{l.costTime=new Date().getTime()-this.table.start},79)},100)}}});export{o as a,c as r,w};
