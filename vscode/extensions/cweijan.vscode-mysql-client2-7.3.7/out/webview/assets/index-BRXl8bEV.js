import{y as M,K as h,c as w,k as R,ab as C,ai as U,a9 as X,ac as g,a as G,d as N}from"./focus-trap-0JUCTGWq.js";import{a3 as K,O as W,P as z,ak as V,aI as $,N as q,aJ as j,ag as y,d as J,e as Q,U as x,Q as Z}from"./app-7HI8a4lx.js";import{g as P}from"./index-Cexr__N_.js";const F='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',ee=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,le=e=>Array.from(e.querySelectorAll(F)).filter(t=>te(t)&&ee(t)),te=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},oe=e=>!e.getAttribute("aria-owns"),fe=(e,t,s)=>{const{parentNode:n}=e;if(!n)return null;const u=n.querySelectorAll(s),r=Array.prototype.indexOf.call(u,e);return u[r+t]||null},me=e=>{e&&(e.focus(),!oe(e)&&e.click())};var f=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(f||{});const Ee=(e,t,s,n)=>{let u={offsetX:0,offsetY:0};const r=a=>{const m=a.clientX,E=a.clientY,{offsetX:v,offsetY:p}=u,d=e.value.getBoundingClientRect(),T=d.left,b=d.top,O=d.width,Y=d.height,k=document.documentElement.clientWidth,D=document.documentElement.clientHeight,I=-T+v,_=-b+p,B=k-T-O+v,H=D-b-Y+p,S=A=>{let c=v+A.clientX-m,l=p+A.clientY-E;n!=null&&n.value||(c=Math.min(Math.max(c,I),B),l=Math.min(Math.max(l,_),H)),u={offsetX:c,offsetY:l},e.value&&(e.value.style.transform=`translate(${M(c)}, ${M(l)})`)},L=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",L)},o=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};K(()=>{W(()=>{s.value?o():i()})}),z(()=>{i()})},ve=(e,t={})=>{V(e)||h("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||w("popup"),n=$(()=>s.bm("parent","hidden"));if(!R||C(document.body,n.value))return;let u=0,r=!1,o="0";const i=()=>{setTimeout(()=>{g(document==null?void 0:document.body,n.value),r&&document&&(document.body.style.width=o)},200)};q(e,a=>{if(!a){i();return}r=!C(document.body,n.value),r&&(o=document.body.style.width),u=P(s.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,E=U(document.body,"overflowY");u>0&&(m||E==="scroll")&&r&&(document.body.style.width=`calc(100% - ${u}px)`),X(document.body,n.value)}),j(()=>i())},ne=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let t=!1,s=!1;return{onClick:o=>{t&&s&&e(o),t=s=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{s=o.target===o.currentTarget}}},se=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:N([String,Array,Object])},zIndex:{type:N([String,Number])}}),ue={click:e=>e instanceof MouseEvent},re="overlay";var ie=J({name:"ElOverlay",props:se,emits:ue,setup(e,{slots:t,emit:s}){const n=w(re),u=a=>{s("click",a)},{onClick:r,onMousedown:o,onMouseup:i}=ne(e.customMaskEvent?void 0:u);return()=>e.mask?Q("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:o,onMouseup:i},[x(t,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):Z("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(t,"default")])}});const pe=ie;export{pe as E,ve as a,ne as b,me as f,fe as g,oe as i,le as o,Ee as u};
