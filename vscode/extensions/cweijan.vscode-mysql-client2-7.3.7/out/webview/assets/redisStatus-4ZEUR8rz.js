import{_ as b,h as y,a as x,b as s,e,w as n,o as g,q as c,t as i,z as S,A as k}from"./app-7HI8a4lx.js";import{E as B}from"./index-Cf7tx5Fe.js";import{E as T}from"./index-4venPVpq.js";import{a as E,E as I}from"./index-CHOIUUl7.js";import{E as R}from"./index-DEoB_Ua-.js";import"./focus-trap-0JUCTGWq.js";import"./isUndefined-DCTLXrZ8.js";import"./index-BnH3xz_z.js";import"./_baseIteratee-BTzwo4Hl.js";import"./index-uoaXWFBg.js";import"./_initCloneObject-BPdR5qB5.js";import"./isArrayLikeObject-BFgP_34p.js";import"./validator-CUeJqo3c.js";const C={mixins:[y],data(){return{autoRefresh:!1,refreshTimer:null,refreshInterval:2e3,connectionStatus:{},statusConnection:null}},computed:{DBKeys(){const t=[];for(const o in this.connectionStatus)if(o.startsWith("db")){const _=this.connectionStatus[o].split(",");t.push({db:o,keys:_[0].split("=")[1],expires:_[1].split("=")[1],avg_ttl:_[2].split("=")[1]})}return t},AllRedisInfo(){const t=[];for(const o in this.connectionStatus)t.push({key:o,value:this.connectionStatus[o]});return t}},mounted(){this.refreshInit(),this.on("info",t=>{this.initStatus(t)}),this.emit("init")},unmounted(){clearInterval(this.refreshTimer)},methods:{refreshInit(){this.refreshTimer=setInterval(()=>{this.autoRefresh&&this.emit("init")},2e3)},sortByKeys(t,o){return t.keys-o.keys},sortByExpires(t,o){return t.expires-o.expires},sortByTTL(t,o){return t.avg_ttl-o.avg_ttl},initStatus(t){if(!t)return{};t=t.split(`
`);const o={};for(let l of t){if(l=l.replace(/\s/gi,""),l.startsWith("#")||!l)continue;const _=l.split(":");o[_[0]]=_[1]}this.connectionStatus=o}}},u=t=>(S("data-v-33b9c347"),t=t(),k(),t),K={id:"app",class:"redis-status-container"},V=u(()=>s("i",{class:"el-icon-refresh"},null,-1)),A={class:"grid grid-cols-3 gap-4 mt-4 px-3"},w={class:"col-span-1"},D={class:"box-card p-3 bg-secondBg mb-3"},M=u(()=>s("span",{class:"text-base mb-2 block"},"Server",-1)),L={class:"server-status-tag-p"},U={class:"server-status-text"},N={class:"server-status-tag-p"},P=["title"],W={class:"server-status-tag-p"},j={class:"server-status-text"},q={class:"col-span-1"},z={class:"box-card p-3 bg-secondBg mb-3"},O=u(()=>s("span",{class:"text-base mb-2 block"}," Memory",-1)),F={class:"server-status-tag-p"},G={class:"server-status-text"},H={class:"server-status-tag-p"},J={class:"server-status-text"},Q={class:"server-status-tag-p"},X={class:"server-status-text"},Y={class:"col-span-1"},Z={class:"box-card p-3 bg-secondBg mb-3"},$=u(()=>s("span",{class:"text-base mb-2 block"},"Stats",-1)),ss={class:"server-status-tag-p"},ts={class:"server-status-text"},es={class:"server-status-tag-p"},os={class:"server-status-text"},ns={class:"server-status-tag-p"},as={class:"server-status-text"},rs={class:"mt-4 px-3"},cs={class:"box-card p-3 bg-secondBg mb-3"},is=u(()=>s("span",{class:"text-base mb-2 block"},"Key Statistics",-1)),ls={class:"mt-4 px-3"},_s={class:"box-card p-3 bg-secondBg mb-3"},ds=u(()=>s("span",{class:"text-base mb-2 block"}," All Redis Info",-1));function ps(t,o,l,_,a,d){const r=B,m=R,f=T,p=I,h=E;return g(),x("div",K,[s("div",null,[e(r,{type:"info"},{default:n(()=>[V,c(" Auto Refresh ")]),_:1}),e(f,{class:"item",effect:"dark",content:"Auto Refresh Switch, Refresh Every 2 Seconds",placement:"bottom",style:{"margin-left":"20px"}},{default:n(()=>[e(m,{modelValue:a.autoRefresh,"onUpdate:modelValue":o[0]||(o[0]=v=>a.autoRefresh=v),onChange:d.refreshInit},null,8,["modelValue","onChange"])]),_:1})]),s("div",A,[s("div",w,[s("div",D,[M,s("p",L,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Redis Version: "),s("span",U,i(a.connectionStatus.redis_version),1)]),_:1})]),s("p",N,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" OS: "),s("span",{class:"server-status-text",title:a.connectionStatus.os},i(a.connectionStatus.os),9,P)]),_:1})]),s("p",W,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Process ID: "),s("span",j,i(a.connectionStatus.process_id),1)]),_:1})])])]),s("div",q,[s("div",z,[O,s("p",F,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Used Memory: "),s("span",G,i(a.connectionStatus.used_memory_human),1)]),_:1})]),s("p",H,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Used Memory Peak: "),s("span",J,i(a.connectionStatus.used_memory_peak_human),1)]),_:1})]),s("p",Q,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Used Memory Lua: "),s("span",X,i(Math.round(a.connectionStatus.used_memory_lua/1024))+"K",1)]),_:1})])])]),s("div",Y,[s("div",Z,[$,s("p",ss,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Connected Clients: "),s("span",ts,i(a.connectionStatus.connected_clients),1)]),_:1})]),s("p",es,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Total Connections: "),s("span",os,i(a.connectionStatus.total_connections_received),1)]),_:1})]),s("p",ns,[e(r,{class:"server-status-container",type:"info"},{default:n(()=>[c(" Total Commands: "),s("span",as,i(a.connectionStatus.total_commands_processed),1)]),_:1})])])])]),s("div",rs,[s("div",cs,[is,e(h,{data:d.DBKeys},{default:n(()=>[e(p,{prop:"db",label:"DB"}),e(p,{sortable:"",prop:"keys",label:"Keys","sort-method":d.sortByKeys},null,8,["sort-method"]),e(p,{sortable:"",prop:"expires",label:"Expires","sort-method":d.sortByExpires},null,8,["sort-method"]),e(p,{sortable:"",prop:"avg_ttl",label:"Avg TTL","sort-method":d.sortByTTL},null,8,["sort-method"])]),_:1},8,["data"])])]),s("div",ls,[s("div",_s,[ds,e(h,{data:d.AllRedisInfo},{default:n(()=>[e(p,{prop:"key",label:"Key"}),e(p,{prop:"value",label:"Value"})]),_:1},8,["data"])])])])}const Es=b(C,[["render",ps],["__scopeId","data-v-33b9c347"]]);export{Es as default};
