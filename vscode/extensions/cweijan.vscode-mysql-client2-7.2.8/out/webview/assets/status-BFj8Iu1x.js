import{_ as q,o,a as c,b as t,F as L,y,t as S,z as E,A as I,d as Q,r as P,U as A,v as u,c as N,n as h,f as O,u as r,D as b,E as f,e as v,w as x,l as B}from"./app-Bf1EJw8l.js";import{L as C,a as k,b as $}from"./lineChartData-P9hfpwst.js";import{A as U}from"./arrayUtil-DEAFvlDD.js";import{E as z,a as F}from"./index-j61gtqiN.js";import"./viewUtil-BUapkDkR.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-CFJCZjdX.js";import"./index-Dpstq9UH.js";import"./focus-trap-DLD2w1Ia.js";import"./index-Ds0zupmL.js";import"./flatten-BCYDgirk.js";import"./_baseIteratee-xh2dZROY.js";import"./index-BtYaA7w7.js";import"./use-form-item-DdyI_hvh.js";import"./_initCloneObject-DbrZpPYH.js";import"./isArrayLikeObject-DnFfw4hg.js";const H={props:["variableList"],data(){return{variableMap:{},infos:[{name:"Port",value:"report_port"},{name:"Version",value:"version"},{name:"Slow Query Log",value:"slow_query_log"},{name:"Performance Schema",value:"performance_schema"},{name:"Base Directory",value:"basedir"},{name:"Data Directory",value:"datadir"}]}},watch:{variableList(){this.variableMap=U.arrayToObj(this.variableList.rows,l=>l.Variable_name,"Value")}},methods:{getValue(l){return this.variableMap[l]}}},j=l=>(E("data-v-b25f2d91"),l=l(),I(),l),G={class:"pl-4"},J=j(()=>t("div",{class:"mb-2"}," Server Infos: ",-1)),K={class:"flex flex-col gap-y-1"},R={class:"var-name"},W={class:"select-all"};function X(l,a,e,g,m,p){return o(),c("div",G,[J,t("div",K,[(o(!0),c(L,null,y(m.infos,d=>(o(),c("div",{key:d.name,class:"flex gap-x-2 flex-wrap shrink-0"},[t("div",R,S(d.name)+":",1),t("div",W,S(p.getValue(d.value)),1)]))),128))])])}const Y=q(H,[["render",X],["__scopeId","data-v-b25f2d91"]]),Z={class:"status-container"},tt={class:"tab"},et={class:"flex flex-row",style:{height:"45vh","margin-top":"10px"}},at={class:"basis-1/3"},st={class:"basis-2/3"},it=t("span",{class:"select-none"},"Traffic:",-1),ot={style:{height:"300px"}},lt={class:"flex"},rt={class:"basis-full"},nt=t("span",{class:"select-none"},"Queries:",-1),ct={style:{height:"300px"}},St=Q({__name:"status",setup(l){const a=P("dashBoard"),e=A({info:{dbType:null},activePanel:"processList",process:{fields:[],rows:[]},variableList:{fields:[],rows:[]},statusList:{fields:[],rows:[]}}),g=new C,m=new C;function p(){u.emit("dashBoard")}function d(){return window.outerHeight-180}u.on("info",i=>{e.info=i,a.value=["MariaDB","MySQL"].includes(e.info.dbType)?"dashBoard":"processList"}).on("processList",i=>{e.process=i}).on("variableList",i=>{e.variableList=i}).on("statusList",i=>{e.statusList=i}).on("dashBoard",i=>{m.addData(i.traffic),g.addData(i.queries)}).init("status"),window.addEventListener("focus",()=>{u.init("status")}),u.emit("processList").emit("variableList").emit("statusList"),p(),setTimeout(()=>p(),1e3),setInterval(()=>p(),3e3);const T=g.toChartData(),M=m.toChartData(),V=N(()=>["MariaDB","MySQL"].includes(e.info.dbType));return(i,n)=>{const w=z,D=F;return o(),c("div",Z,[t("ul",tt,[V.value?(o(),c("li",{key:0,class:h(["tab__item",{"tab__item--active":a.value=="dashBoard"}]),onClick:n[0]||(n[0]=s=>{a.value="dashBoard",p()})},"Dashboard",2)):O("",!0),t("li",{class:h(["tab__item",{"tab__item--active":a.value=="processList"}]),onClick:n[1]||(n[1]=s=>{a.value="processList",r(u).emit("processList")})},"ProcessList",2),t("li",{class:h(["tab__item",{"tab__item--active":a.value=="variableList"}]),onClick:n[2]||(n[2]=s=>{a.value="variableList",r(u).emit("variableList")})},"VariableList",2),t("li",{class:h(["tab__item",{"tab__item--active":a.value=="statusList"}]),onClick:n[3]||(n[3]=s=>{a.value="statusList",r(u).emit("statusList")})},"StatusList",2)]),b(t("div",null,[t("div",et,[t("div",at,[v(Y,{variableList:e.variableList},null,8,["variableList"])]),t("div",st,[it,t("div",ot,[v(r($),{options:r(k).getOption(!0),data:r(M)},null,8,["options","data"])])])]),t("div",lt,[t("div",rt,[nt,t("div",ct,[v(r($),{options:r(k).getOption(),data:r(T)},null,8,["options","data"])])])])],512),[[f,["MariaDB","MySQL"].includes(e.info.dbType)&&a.value=="dashBoard"]]),b(t("div",null,[v(D,{data:e.process.rows,"cell-style":{height:"35px"},style:{width:"100%"},height:d()},{default:x(()=>[(o(!0),c(L,null,y(e.process.fields,(s,_)=>(o(),B(w,{key:_,prop:s.name,label:s.name,align:"center"},null,8,["prop","label"]))),128))]),_:1},8,["data","height"])],512),[[f,a.value=="processList"]]),b(t("div",null,[v(D,{data:e.variableList.rows,"cell-style":{height:"35px"},style:{width:"100%"},height:d()},{default:x(()=>[(o(!0),c(L,null,y(e.variableList.fields,(s,_)=>(o(),B(w,{key:_,prop:s.name,label:s.name,align:"center"},null,8,["prop","label"]))),128))]),_:1},8,["data","height"])],512),[[f,e.info.dbType!="SqlServer"&&a.value=="variableList"]]),b(t("div",null,[v(D,{data:e.statusList.rows,"cell-style":{height:"35px"},style:{width:"100%"},height:d()},{default:x(()=>[(o(!0),c(L,null,y(e.statusList.fields,(s,_)=>(o(),B(w,{key:_,prop:s.name,label:s.name,align:"center"},null,8,["prop","label"]))),128))]),_:1},8,["data","height"])],512),[[f,e.info.dbType!="SqlServer"&&a.value=="statusList"]])])}}});export{St as default};
