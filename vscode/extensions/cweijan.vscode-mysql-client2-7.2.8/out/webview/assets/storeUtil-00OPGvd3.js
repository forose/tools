import{d as $,c as N,o as p,a as y,a6 as X,e as L,w as F,D as J,b as B,n as g,u as r,C as le,t as ue,E as Ie,W as ae,r as Ce,U as xe,M as ke,X as Te,Y as Pe,I as D,l as I,f as w,H as Y,ao as De,_ as Me,Q as ce,a5 as de,F as te,y as Oe}from"./app-Bf1EJw8l.js";import{b as me,d as ne,a as he,r as v,t as se,_ as pe,w as fe,k as Le,v as x,u as Be,h as M,p as Ae,x as Fe,c as ie,y as $e,z as We}from"./index-Dpstq9UH.js";import{E as Ue}from"./index-87euUeSH.js";import{C as be,I as A,U as C,t as ze,d as oe}from"./focus-trap-DLD2w1Ia.js";import{u as He,a as Re,b as Ke}from"./use-form-item-DdyI_hvh.js";import{v as re}from"./index-Dm6zhURh.js";const Ye=me({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,dotStyle:{type:ne([String,Object,Array])},offset:{type:ne(Array),default:[0,0]},dotClass:{type:String}}),je=["textContent"],Ge=$({name:"ElBadge"}),Xe=$({...Ge,props:Ye,setup(s,{expose:t}){const n=s,i=he("badge"),c=N(()=>n.isDot?"":v(n.value)&&v(n.max)?n.max<n.value?`${n.max}+`:n.value===0&&!n.showZero?"":`${n.value}`:`${n.value}`),d=N(()=>{var u,l,b,S,E;return[{backgroundColor:n.color,marginRight:se(-((l=(u=n.offset)==null?void 0:u[0])!=null?l:0)),marginTop:se((S=(b=n.offset)==null?void 0:b[1])!=null?S:0)},(E=n.dotStyle)!=null?E:{}]});return t({content:c}),(u,l)=>(p(),y("div",{class:g(r(i).b())},[X(u.$slots,"default"),L(ae,{name:`${r(i).namespace.value}-zoom-in-center`,persisted:""},{default:F(()=>[J(B("sup",{class:g([r(i).e("content"),r(i).em("content",u.type),r(i).is("fixed",!!u.$slots.default),r(i).is("dot",u.isDot),u.dotClass]),style:le(r(d)),textContent:ue(r(c))},null,14,je),[[Ie,!u.hidden&&(r(c)||u.isDot)]])]),_:1},8,["name"])],2))}});var Je=pe(Xe,[["__file","badge.vue"]]);const Nt=fe(Je),Ze=me({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Le,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||v(s)||["min","max"].includes(s),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0}}),qe={[be]:(s,t)=>t!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[A]:s=>v(s)||x(s),[C]:s=>v(s)||x(s)},Qe=["aria-label","onKeydown"],et=["aria-label","onKeydown"],tt=$({name:"ElInputNumber"}),nt=$({...tt,props:Ze,emits:qe,setup(s,{expose:t,emit:n}){const i=s,{t:c}=Be(),d=he("input-number"),u=Ce(),l=xe({currentValue:i.modelValue,userInput:null}),{formItem:b}=He(),S=N(()=>v(i.modelValue)&&i.modelValue<=i.min),E=N(()=>v(i.modelValue)&&i.modelValue>=i.max),ye=N(()=>{const e=q(i.step);return M(i.precision)?Math.max(q(i.modelValue),e):(e>i.precision,i.precision)}),W=N(()=>i.controls&&i.controlsPosition==="right"),Z=Re(),V=Ke(),U=N(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if(x(e))return"";if(v(e)){if(Number.isNaN(e))return"";M(i.precision)||(e=e.toFixed(i.precision))}return e}),z=(e,o)=>{if(M(o)&&(o=ye.value),o===0)return Math.round(e);let a=String(e);const m=a.indexOf(".");if(m===-1||!a.replace(".","").split("")[m+o])return e;const T=a.length;return a.charAt(T-1)==="5"&&(a=`${a.slice(0,Math.max(0,T-1))}6`),Number.parseFloat(Number(a).toFixed(o))},q=e=>{if(x(e))return 0;const o=e.toString(),a=o.indexOf(".");let m=0;return a!==-1&&(m=o.length-a-1),m},Q=(e,o=1)=>v(e)?z(e+i.step*o):l.currentValue,H=()=>{if(i.readonly||V.value||E.value)return;const e=Number(U.value)||0,o=Q(e);k(o),n(A,l.currentValue),K()},R=()=>{if(i.readonly||V.value||S.value)return;const e=Number(U.value)||0,o=Q(e,-1);k(o),n(A,l.currentValue),K()},ee=(e,o)=>{const{max:a,min:m,step:h,precision:_,stepStrictly:T,valueOnClear:P}=i;a<m&&ze("InputNumber","min should not be greater than max.");let f=Number(e);if(x(e)||Number.isNaN(f))return null;if(e===""){if(P===null)return null;f=De(P)?{min:m,max:a}[P]:P}return T&&(f=z(Math.round(f/h)*h,_)),M(_)||(f=z(f,_)),(f>a||f<m)&&(f=f>a?a:m,o&&n(C,f)),f},k=(e,o=!0)=>{var a;const m=l.currentValue,h=ee(e);if(!o){n(C,h);return}m===h&&e||(l.userInput=null,n(C,h),m!==h&&n(be,h,m),i.validateEvent&&((a=b==null?void 0:b.validate)==null||a.call(b,"change").catch(_=>oe())),l.currentValue=h)},_e=e=>{l.userInput=e;const o=e===""?null:Number(e);n(A,o),k(o,!1)},Ne=e=>{const o=e!==""?Number(e):"";(v(o)&&!Number.isNaN(o)||e==="")&&k(o),K(),l.userInput=null},ge=()=>{var e,o;(o=(e=u.value)==null?void 0:e.focus)==null||o.call(e)},we=()=>{var e,o;(o=(e=u.value)==null?void 0:e.blur)==null||o.call(e)},Se=e=>{n("focus",e)},Ee=e=>{var o;l.userInput=null,n("blur",e),i.validateEvent&&((o=b==null?void 0:b.validate)==null||o.call(b,"blur").catch(a=>oe()))},K=()=>{l.currentValue!==i.modelValue&&(l.currentValue=i.modelValue)},Ve=e=>{document.activeElement===e.target&&e.preventDefault()};return ke(()=>i.modelValue,(e,o)=>{const a=ee(e,!0);l.userInput===null&&a!==o&&(l.currentValue=a)},{immediate:!0}),Te(()=>{var e;const{min:o,max:a,modelValue:m}=i,h=(e=u.value)==null?void 0:e.input;if(h.setAttribute("role","spinbutton"),Number.isFinite(a)?h.setAttribute("aria-valuemax",String(a)):h.removeAttribute("aria-valuemax"),Number.isFinite(o)?h.setAttribute("aria-valuemin",String(o)):h.removeAttribute("aria-valuemin"),h.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),h.setAttribute("aria-disabled",String(V.value)),!v(m)&&m!=null){let _=Number(m);Number.isNaN(_)&&(_=null),n(C,_)}}),Pe(()=>{var e,o;const a=(e=u.value)==null?void 0:e.input;a==null||a.setAttribute("aria-valuenow",`${(o=l.currentValue)!=null?o:""}`)}),t({focus:ge,blur:we}),(e,o)=>(p(),y("div",{class:g([r(d).b(),r(d).m(r(Z)),r(d).is("disabled",r(V)),r(d).is("without-controls",!e.controls),r(d).is("controls-right",r(W))]),onDragstart:o[0]||(o[0]=Y(()=>{},["prevent"]))},[e.controls?J((p(),y("span",{key:0,role:"button","aria-label":r(c)("el.inputNumber.decrease"),class:g([r(d).e("decrease"),r(d).is("disabled",r(S))]),onKeydown:D(R,["enter"])},[X(e.$slots,"decrease-icon",{},()=>[L(r(ie),null,{default:F(()=>[r(W)?(p(),I(r(Ae),{key:0})):(p(),I(r(Fe),{key:1}))]),_:1})])],42,Qe)),[[r(re),R]]):w("v-if",!0),e.controls?J((p(),y("span",{key:1,role:"button","aria-label":r(c)("el.inputNumber.increase"),class:g([r(d).e("increase"),r(d).is("disabled",r(E))]),onKeydown:D(H,["enter"])},[X(e.$slots,"increase-icon",{},()=>[L(r(ie),null,{default:F(()=>[r(W)?(p(),I(r($e),{key:0})):(p(),I(r(We),{key:1}))]),_:1})])],42,et)),[[r(re),H]]):w("v-if",!0),L(r(Ue),{id:e.id,ref_key:"input",ref:u,type:"number",step:e.step,"model-value":r(U),placeholder:e.placeholder,readonly:e.readonly,disabled:r(V),size:r(Z),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:Ve,onKeydown:[D(Y(H,["prevent"]),["up"]),D(Y(R,["prevent"]),["down"])],onBlur:Ee,onFocus:Se,onInput:_e,onChange:Ne},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var st=pe(nt,[["__file","input-number.vue"]]);const gt=fe(st),j="left",G="right",it="contextmenu-submenu",ot={name:it,props:{items:{type:Array,default:()=>[]},position:{type:Object,default:()=>({x:0,y:0,width:0,height:0})},minWidth:{type:Number,default:200},presetOpenTrend:{type:String,default:G}},data(){return{activeSubmenu:{index:null,instance:null},subMenu:null,style:{left:0,top:0,zIndex:2,minWidth:150},hasIcon:!1,openTrend:this.presetOpenTrend}},computed:{filtedItems(){return this.items.filter(s=>{const t=typeof s.hidden=="function"&&s.hidden();return s.hidden!==!0&&!t})}},mounted(){for(let s of this.items)if(s.icon){this.hasIcon=!0;break}this.$nextTick(()=>{const s=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=this.$refs.menu,i=n.offsetWidth,c=n.offsetHeight;(this.openTrend===j?this.leftOpen:this.rightOpen)(s,t,i),this.style.top=this.position.y,this.position.y+c>t&&(this.position.height===0?this.style.top=this.position.y/t>.5?this.position.y-c:this.position.y:this.style.top=t-c)})},methods:{leftOpen(s,t,n){this.style.left=this.position.x-n,this.openTrend=j,this.style.left<0&&(this.openTrend=G,this.position.width===0?this.style.left=0:this.style.left=this.position.x+this.position.width)},rightOpen(s,t,n){this.style.left=this.position.x+this.position.width,this.openTrend=G,this.style.left+n>s&&(this.openTrend=j,this.position.width===0?this.style.left=s-n:this.style.left=this.position.x-n)},enterItem(s,t,n){if(this.activeSubmenu.instance){if(this.activeSubmenu.index===n)return;this.closeSub()}if(!t.children)return;const i=3,c=-8,d=s.target.getBoundingClientRect(),u=this.$options;this.activeSubmenu.instance=ce(u,{items:t.children,position:{x:d.x+i,y:d.y+c,width:d.width-2*i,height:d.height-2*c},minWidth:typeof t.minWidth=="number"?t.minWidth:this.minWidth,presetOpenTrend:this.openTrend}),this.activeSubmenu.index=n;const l=document.createElement("div");de(this.activeSubmenu.instance,l),this.subMenu=l.childNodes[0],document.body.appendChild(l.childNodes[0])},itemClick(s){this.disabled||!s.disabled&&typeof s.onClick=="function"&&s.onClick()},closeSub(){this.activeSubmenu.instance&&(document.body.removeChild(this.subMenu),this.activeSubmenu.instance=null,this.activeSubmenu.index=null)}}},rt=["onClick","onMouseenter"],lt={key:0,class:"menu_item_icon"},ut={class:"menu_item_label"},at={key:1,class:"menu_item_expand_icon"},ct={key:0,class:"menu-item-divider"};function dt(s,t,n,i,c,d){return p(),I(ae,{name:"contextmenu-submenu-fade"},{default:F(()=>[B("div",{ref:"menu",class:"menu",style:le({left:c.style.left+"px",top:c.style.top+"px",minWidth:c.style.minWidth+"px"}),onContextmenu:t[0]||(t[0]=u=>u.preventDefault())},[(p(!0),y(te,null,Oe(d.filtedItems,(u,l)=>(p(),y(te,{key:l},[B("div",{class:g(["menu_item",{menu_item__disabled:u.disabled}]),onClick:()=>d.itemClick(u),onMouseenter:b=>d.enterItem(b,u,l)},[c.hasIcon?(p(),y("div",lt,[u.icon?(p(),y("i",{key:0,class:g(u.icon)},null,2)):w("",!0)])):w("",!0),B("span",ut,ue(u.label),1),u.children?(p(),y("div",at,"▶")):w("",!0)],42,rt),u.divided?(p(),y("div",ct)):w("",!0)],64))),128))],36)]),_:1})}const mt=Me(ot,[["render",dt],["__scopeId","data-v-e7633cd8"]]);class ht{constructor(t){this.instance=ce(mt,{items:t.items,position:{x:t.event&&t.event.clientX||t.x||0,y:t.event&&t.event.clientY||t.y||0,width:0,height:0},minWidth:t.minWidth});const n=document.createElement("div");de(this.instance,n),document.body.appendChild(n.childNodes[0]),this.addListener()}mousewheelListener(t){this.close()}mouseDownListener(t){var i,c;((c=(i=t.target)==null?void 0:i.getAttribute("class"))==null?void 0:c.includes("menu_item"))?t.preventDefault():this.close(t.target)}mouseClickListener(t){var i,c;((c=(i=t.target)==null?void 0:i.getAttribute("class"))==null?void 0:c.includes("menu_item"))&&this.close(t.target)}addListener(){this.mouseClickListenerProxy=t=>this.mouseClickListener(t),this.mouseDownListenerProxy=t=>this.mouseDownListener(t),document.addEventListener("click",this.mouseClickListenerProxy),document.addEventListener("mousedown",this.mouseDownListenerProxy)}removeListener(){document.removeEventListener("click",this.mouseClickListenerProxy),document.removeEventListener("mousedown",this.mouseDownListenerProxy)}isDisable(t){var i;let n=2;for(;n--&&t!=null;){if((i=t.getAttribute("class"))!=null&&i.includes("menu_item__disabled"))return!0;t=t.parentElement}}close(t){if(!this.isDisable(t)){this.removeListener();for(const n of document.querySelectorAll(".menu"))document.body.removeChild(n)}}}let O=null;function wt(s){O&&(O.close(),O=null),O=new ht(s)}const ve=/^(\$|_|vm)/i;function St(s,t){for(const n of Object.keys(s))n.startsWith("$")||n.startsWith("_")||n.match(ve)||t[n]===void 0&&(t[n]=null);s.$patch(t)}function Et(s){return JSON.parse(JSON.stringify(s,(t,n)=>t.match(ve)?null:n))}export{gt as E,Nt as a,Et as b,wt as c,St as r};
