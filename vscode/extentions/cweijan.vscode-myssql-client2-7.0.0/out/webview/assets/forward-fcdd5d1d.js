import{_ as l,a as n}from"./form-ef256926.js";import{_ as r}from"./switch-8300c58b.js";import{_ as c}from"./dialog-36e67177.js";import{_ as d,a}from"./table-cf0a5570.js";import{n as p,s as m}from"./notify-f0943433.js";import{n as u,i as f}from"./pinia-8e23f54c.js";import"./scrollbar-673c2fe2.js";import"./index-1abde4d9.js";import"./checkbox-84118753.js";import"./checkbox-group-d4c71378.js";import"./index-3e66c890.js";const v={mixins:[f],data(){return{name:"",config:{},forwardList:[],panel:{visible:!1,loading:!1,edit:{}}}},mounted(){this.on("forwardList",i=>{this.forwardList=i,this.panel.loading=!1,this.panel.visible=!1}).on("config",i=>{this.config=i}).on("name",i=>{this.name=i}).on("success",()=>{this.error=!1,this.emit("load")}).on("error",({id:i,message:t})=>{for(const e of this.forwardList)e.id==i&&(e.loading=!1);this.panel.loading=!1,p({message:t,type:"error",position:"top-left"})}).init()},methods:{createRequest(){this.panel.edit={localHost:"127.0.0.1",remoteHost:"127.0.0.1"},this.panel.visible=!0},load(){this.emit("load")},confirmSave(){this.emit("save",this.panel.edit),this.panel.loading=!0},copyForwardCommand(i){const t=`ssh -qTnN -L ${i.localHost}:${i.localPort}:${i.remoteHost}:${i.remotePort} ${this.config.username}@${this.config.host}`;navigator.clipboard.writeText(t),m("Copied forward command to clipboard!")},start(i){i.loading=!0,this.emit("start",i.id)},stop(i){this.emit("stop",i)},remove(i){this.emit("remove",i)},openEdit(i){this.panel.edit=i,this.panel.visible=!0},deleteConfirm(i){this.$confirm("Are you sure to delete this forward?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.remove(i)})}}};var _=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"ml-2 my-1 text-base"},[t._v(" Connection: "+t._s(t.name)),e("br"),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiCyan)"},attrs:{type:"icon",icon:"codicon-add text-base"},on:{click:t.createRequest}}),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiBrightGreen)"},attrs:{type:"icon",icon:"codicon-refresh text-base"},on:{click:t.load}})],1),e(d,{staticStyle:{width:"100%"},attrs:{data:t.forwardList}},[e(a,{attrs:{prop:"name",label:"name"}}),e(a,{attrs:{prop:"localHost",label:"Local Host"}}),e(a,{attrs:{prop:"localPort",label:"Local Port"}}),e(a,{attrs:{prop:"remoteHost",label:"Remote Host"}}),e(a,{attrs:{prop:"remotePort",label:"Remote Port"}}),e(a,{attrs:{prop:"autoStartUp",label:"Auto Start"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v(" "+t._s(o.row.autoStartUp?"Yes":"No")+" ")]}}])}),e(a,{attrs:{prop:"state",label:"State"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v(" "+t._s(o.row.state?"running":"stop")+" ")]}}])}),e(a,{attrs:{fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(o){return[o.row.state?t._e():e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiBrightGreen)"},attrs:{type:"success",size:"small",title:"Start",loading:o.row.loading,icon:"el-icon-video-play",circle:""},on:{click:function(s){return t.start(o.row)}}}),o.row.state?e("vsc-button",{attrs:{type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:""},on:{click:function(s){return t.stop(o.row.id)}}}):t._e(),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiCyan)"},attrs:{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",circle:""},on:{click:function(s){return t.openEdit(o.row)}}}),e("vsc-button",{staticStyle:{color:"var(--vscode-charts-yellow)"},attrs:{size:"small",title:"Copy command",icon:"el-icon-document-copy",circle:""},on:{click:function(s){return t.copyForwardCommand(o.row)}}}),e("vsc-button",{staticStyle:{color:"#f56c6c"},attrs:{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(s){return t.deleteConfirm(o.row.id)}}})]}}])})],1),e(c,{ref:"editDialog",attrs:{title:"Port Fowarding",visible:t.panel.visible,width:"600px",top:"3vh",closeOnClickModal:!1},on:{"update:visible":function(o){return t.$set(t.panel,"visible",o)}}},[e(l,{ref:"infoForm",attrs:{model:t.panel.edit,"label-width":"120px"}},[e(n,{staticClass:"auto-start-form-item",attrs:{size:"mini",label:"Auto start with VS Code startup"}},[e(r,{staticClass:"ml-2",model:{value:t.panel.edit.autoStartUp,callback:function(o){t.$set(t.panel.edit,"autoStartUp",o)},expression:"panel.edit.autoStartUp"}})],1),e(n,{attrs:{size:"mini",label:"Name"}},[e("vsc-input",{model:{value:t.panel.edit.name,callback:function(o){t.$set(t.panel.edit,"name",o)},expression:"panel.edit.name"}})],1),e("div",{staticClass:"flex flex-row"},[e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Local Host"}},[e("vsc-input",{model:{value:t.panel.edit.localHost,callback:function(o){t.$set(t.panel.edit,"localHost",o)},expression:"panel.edit.localHost"}})],1)],1),e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Local Port"}},[e("vsc-input",{model:{value:t.panel.edit.localPort,callback:function(o){t.$set(t.panel.edit,"localPort",o)},expression:"panel.edit.localPort"}})],1)],1)]),e("div",{staticClass:"flex flex-row"},[e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Remote Host"}},[e("vsc-input",{model:{value:t.panel.edit.remoteHost,callback:function(o){t.$set(t.panel.edit,"remoteHost",o)},expression:"panel.edit.remoteHost"}})],1)],1),e("div",{staticClass:"basis-1/2"},[e(n,{attrs:{size:"mini",label:"Remote Port"}},[e("vsc-input",{nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.confirmSave.apply(null,arguments)}},model:{value:t.panel.edit.remotePort,callback:function(o){t.$set(t.panel.edit,"remotePort",o)},expression:"panel.edit.remotePort"}})],1)],1)])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("vsc-button",{attrs:{type:"secondary",size:"mini"},on:{click:function(o){t.panel.visible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("vsc-button",{attrs:{loading:t.panel.loading,size:"mini"},on:{click:t.confirmSave}},[t._v("Save")])],1)],1)],1)},b=[],h=u(v,_,b,!1,null,"f46facbd",null,null);const L=h.exports;export{L as default};
